LevelDB:    version 1.23
Date:       Fri Nov  1 14:58:28 2024
CPU:        112 * Intel(R) Xeon(R) Platinum 8180 CPU @ 2.50GHz
CPUCache:   39424 KB
open dbs:in fresh_db()
open dbs:in Open()
initialize 0 objects(LevelHotColdStats) within these 7 levels
Processing 1 entries in every Batch
finishing builder file: builder:1070971 file size:1070971
the added key is 994588427465382400©
Partition:    1 | Start: 0000000000000119     | End: 0000000656976962     | Total files:     1 | Written KVs:       7262 | Total file size:    1070971 bytes | Avg file size:    1070971 bytes
Partition:    2 | Start: 0000000664287015     | End: 994588427465382400   | Total files:     1 | Written KVs:       2365 | Total file size:     366027 bytes | Avg file size:     366027 bytes
found!!!!
long op: 3782988.0 micros                              long op: 5809822.0 micros                              long op: 5585181.0 micros                              long op: 5734535.0 micros                              long op: 5649762.0 micros                              long op: 5553582.0 micros                              long op: 5346577.0 micros                              ../../hotdb/release/db_bench --db=/mnt/hotdb_test/hotdb10B/1.1 --num=10000000000 --value_size=128 --batch_size=1000 --benchmarks=fillzipf,stats --data_file=/home/jeff-wang/workloads/zipf1.1_keys10.0B.csv --logpath=/mnt/logs --bloom_bits=10 --log=1 --cache_size=8388608 --open_files=40000 --compression=0 --stats_interval=10000000 --histogram=1 --write_buffer_size=1048576 --max_file_size=2097152 --print_wa=true 
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    10000000000
RawSize:    1373291.0 MB (estimated)
FileSize:   762939.5 MB (estimated)
WARNING: Optimization is disabled: benchmarks unnecessarily slow
WARNING: Assertions are enabled; benchmarks unnecessarily slow
WARNING: Snappy compression is not enabled
some command parameters have been selected:
  threads: 1
  duration: 0
  print_wa: 1
  num_entries: 10000000000
  bechmark selected fillzipf,stats
  hot_file_path: 
  data_file_path: /home/jeff-wang/workloads/zipf1.1_keys10.0B.csv
  percentages: 
  write_buffer_size: 1048576
  Print Interval: 10000000
------------------------------------------------
2024-11-01 15:03:37 ... thread 0: (10000000,10000000) ops and (32444.3,32444.3) ops/second in (308.220906,308.220906) seconds
all identification time:0.000162
                               Compactions
Level Files(Tier) Size(M) Time(s) Read(L) Read(T) Write(L) Write(T) m_comp si_comp(Tiering) ifile(Tiering) pfile(Tiering) se_comp(Tiering) ifiles(Tiering) pfiles(Tiering) comps triv_move t_last_b t_next_b
--------------------------------------------------
    0   209(   9)       0      36       0       0      553      841      0       0(     40)     0(    960)     0(      0)       0(      0)      0(      0)      0(      0)    40        13        0        0
    1    31(   4)       0      61     756     883      663       54      0       0(      0)     0(      0)     0(     36)       0(      0)      0(      0)      0(      0)     0        76        0        2
    2    99(   0)       0      25     662       0      645        0      0       0(      0)     0(      0)     0(      0)       0(      0)      0(      0)      0(      0)     0        71        2        2
    3    72(   0)       0       0       6       0        6        0      0       0(      0)     0(      0)     0(      0)       0(      0)      0(      0)      0(      0)     0         0        2        0
user_io:1393.746MB total_ios: 2762.145MB WriteAmplification: 1.9818
10000000 operations have been finished (user has been written 0.000 MB data into db.)


long op: 5577772.0 micros                              long op: 5351700.0 micros                              long op: 5329610.0 micros                              long op: 5588958.0 micros                              long op: 5316816.0 micros                              long op: 5511366.0 micros                              long op: 5391672.0 micros                              long op: 5455017.0 micros                              2024-11-01 15:13:36 ... thread 0: (10000000,20000000) ops and (16669.9,22023.9) ops/second in (599.882016,908.102922) seconds
all identification time:0.000396
                               Compactions
Level Files(Tier) Size(M) Time(s) Read(L) Read(T) Write(L) Write(T) m_comp si_comp(Tiering) ifile(Tiering) pfile(Tiering) se_comp(Tiering) ifiles(Tiering) pfiles(Tiering) comps triv_move t_last_b t_next_b
--------------------------------------------------
    0   185(   1)       0      99       0       0     1075     1716      0       0(     82)     0(   1968)     0(      0)       0(      0)      0(      0)      0(      0)    82        43        0        0
    1    43(   5)       0     136    1639    1862     1465      151      0       0(      0)     0(      0)     0(    113)       0(      0)      0(      0)      0(      0)     0       148        0        2
    2   103(   0)       0      83    1836       0     1776        0      0       0(      0)     0(      0)     0(      0)       0(      0)      0(      0)      0(      0)     0       175        2        1
    3   262(   0)       0      36     578       0      547        0      0       0(      0)     0(      0)     0(      0)       0(      0)      0(      0)      0(      0)     0         0        1        0
user_io:2790.413MB total_ios: 6730.494MB WriteAmplification: 2.4120
20000000 operations have been finished (user has been written 1373.600 MB data into db.)


long op: 5259930.0 micros                              long op: 5561249.0 micros                              long op: 5349552.0 micros                              long op: 5297232.0 micros                              long op: 5448794.0 micros                              long op: 8350022.0 micros                              long op: 5520041.0 micros                              long op: 5435950.0 micros                              2024-11-01 15:27:52 ... thread 0: (10000000,30000000) ops and (11681.7,17005.5) ops/second in (856.036132,1764.139054) seconds
all identification time:0.000649
                               Compactions
Level Files(Tier) Size(M) Time(s) Read(L) Read(T) Write(L) Write(T) m_comp si_comp(Tiering) ifile(Tiering) pfile(Tiering) se_comp(Tiering) ifiles(Tiering) pfiles(Tiering) comps triv_move t_last_b t_next_b
--------------------------------------------------
    0   179(  17)       0     151       0       0     1584     2603      0       0(    123)     0(   2952)     0(      0)       0(      0)      0(      0)      0(      0)   123        44        0        0
    1    37(   5)       0     222    2506    2854     2258      271      0       0(      0)     0(      0)     0(    195)       0(      0)      0(      0)      0(      0)     0       210        0        2
    2   103(   0)       0     162    3010       0     2904        0      0       0(      0)     0(      0)     0(      0)       0(      0)      0(      0)      0(      0)     0       175        2        1
    3   431(   0)       0     128    1968       0     1883        0      0       0(      0)     0(      0)     0(      0)       0(      0)      0(      0)      0(      0)     0         0        1        0
user_io:4187.054MB total_ios: 11502.746MB WriteAmplification: 2.7472
30000000 operations have been finished (user has been written 2747.201 MB data into db.)


long op: 5451146.0 micros                              long op: 5276975.0 micros                              long op: 5534631.0 micros                              long op: 5267401.0 micros                              long op: 5635019.0 micros                              long op: 5592578.0 micros                              long op: 5351401.0 micros                              long op: 5866359.0 micros                              2024-11-01 15:45:46 ... thread 0: (10000000,40000000) ops and (9315.8,14096.5) ops/second in (1073.449818,2837.588872) seconds
all identification time:0.000874
                               Compactions
Level Files(Tier) Size(M) Time(s) Read(L) Read(T) Write(L) Write(T) m_comp si_comp(Tiering) ifile(Tiering) pfile(Tiering) se_comp(Tiering) ifiles(Tiering) pfiles(Tiering) comps triv_move t_last_b t_next_b
--------------------------------------------------
    0   248(   8)       0     214       0       0     2086     3497      0       0(    165)     0(   3960)     0(      0)       0(      0)      0(      0)      0(      0)   165        60        0        0
    1    49(   5)       0     316    3362    3899     3051      415      0       0(      0)     0(      0)     0(    279)       0(      0)      0(      0)      0(      0)     0       282        0        2
    2   114(   0)       0     245    4092       0     3951        0      0       0(      0)     0(      0)     0(      0)       0(      0)      0(      0)      0(      0)     0       175        2        1
    3   594(   0)       0     256    3697       0     3541        0      0       0(      0)     0(      0)     0(      0)       0(      0)      0(      0)      0(      0)     0         0        1        0
user_io:5582.812MB total_ios: 16540.213MB WriteAmplification: 2.9627
40000000 operations have been finished (user has been written 4120.801 MB data into db.)


long op: 5798331.0 micros                              long op: 5774314.0 micros                              long op: 5486280.0 micros                              long op: 5963208.0 micros                              long op: 2012013.0 micros                              long op: 2021183.0 micros                              long op: 2044532.0 micros                              long op: 2075766.0 micros                              long op: 2008653.0 micros                              long op: 5814411.0 micros                              long op: 2124002.0 micros                              long op: 5847755.0 micros                              long op: 3747975.0 micros                              long op: 5749347.0 micros                              long op: 5782153.0 micros                              2024-11-01 16:11:50 ... thread 0: (10000000,50000000) ops and (6392.0,11358.4) ops/second in (1564.449725,4402.038597) seconds
all identification time:0.001092
                               Compactions
Level Files(Tier) Size(M) Time(s) Read(L) Read(T) Write(L) Write(T) m_comp si_comp(Tiering) ifile(Tiering) pfile(Tiering) se_comp(Tiering) ifiles(Tiering) pfiles(Tiering) comps triv_move t_last_b t_next_b
--------------------------------------------------
    0   185(   0)       0     405       0       0     2582     4397      0       0(    207)     0(   4968)     0(      0)       0(      0)      0(      0)      0(      0)   207        74        0        0
    1    67(   5)       0     437    4214    4968     3838      576      0       0(      0)     0(      0)     0(    363)       0(      0)      0(      0)      0(      0)     0       351        0        2
    2   127(   0)       0     351    5149       0     4969        0      0       0(      0)     0(      0)     0(      0)       0(      0)      0(      0)      0(      0)     0       175        2        1
    3   741(   0)       0     442    5575       0     5347        0      0       0(      0)     0(      0)     0(      0)       0(      0)      0(      0)      0(      0)     0         0        1        0
user_io:6979.461MB total_ios: 21710.160MB WriteAmplification: 3.1106
50000000 operations have been finished (user has been written 5494.399 MB data into db.)


long op: 11795066.0 micros                              long op: 2049374.0 micros                              long op: 3305568.0 micros                              long op: 5957982.0 micros                              long op: 2060254.0 micros                              long op: 2112784.0 micros                              long op: 2127747.0 micros                              long op: 2118482.0 micros                              long op: 2128602.0 micros                              long op: 2134202.0 micros                              long op: 2126112.0 micros                              long op: 2125554.0 micros                              long op: 2132587.0 micros                              long op: 2133318.0 micros                              long op: 2107479.0 micros                              long op: 2127886.0 micros                              long op: 2201717.0 micros                              long op: 2130168.0 micros                              long op: 2147229.0 micros                              long op: 2177904.0 micros                              long op: 2191490.0 micros                              long op: 2241610.0 micros                              long op: 2177054.0 micros                              long op: 2177049.0 micros                              long op: 2185843.0 micros                              long op: 2205225.0 micros                              long op: 2210617.0 micros                              long op: 2188541.0 micros                              long op: 2194857.0 micros                              long op: 2174422.0 micros                              long op: 2183490.0 micros                              long op: 2167603.0 micros                              long op: 6023655.0 micros                              long op: 2190534.0 micros                              long op: 2194903.0 micros                              long op: 2204308.0 micros                              long op: 2211327.0 micros                              long op: 2202910.0 micros                              long op: 2182080.0 micros                              long op: 2189772.0 micros                              long op: 2200512.0 micros                              long op: 2149206.0 micros                              long op: 2089126.0 micros                              long op: 2148488.0 micros                              long op: 2145109.0 micros                              long op: 2168957.0 micros                              long op: 2173302.0 micros                              long op: 2187726.0 micros                              long op: 2189738.0 micros                              long op: 2200097.0 micros                              long op: 2214322.0 micros                              long op: 2244085.0 micros                              long op: 2251879.0 micros                              long op: 2250222.0 micros                              long op: 2013412.0 micros                              long op: 2244155.0 micros                              long op: 2259603.0 micros                              long op: 2208630.0 micros                              long op: 2207328.0 micros                              long op: 2050491.0 micros                              long op: 5613780.0 micros                              AddressSanitizer:DEADLYSIGNAL
=================================================================
==864052==ERROR: AddressSanitizer: SEGV on unknown address (pc 0x568585ade526 bp 0x74bb479ff6a0 sp 0x74bb479ff690 T2)
==864052==The signal is caused by a READ memory access.
==864052==Hint: this fault was caused by a dereference of a high value address (see register values below).  Dissassemble the provided pc to learn which register was used.
    #0 0x568585ade526 in leveldb::Compaction::level() const /home/jeff-wang/WorkloadAnalysis/hotdb/./db/version_set.h:463
    #1 0x568585abd0d5 in leveldb::DBImpl::BackgroundCompaction() /home/jeff-wang/WorkloadAnalysis/hotdb/db/db_impl.cc:1685
    #2 0x568585abb68e in leveldb::DBImpl::BackgroundCall() /home/jeff-wang/WorkloadAnalysis/hotdb/db/db_impl.cc:1568
    #3 0x568585abb45f in leveldb::DBImpl::BGWork(void*) /home/jeff-wang/WorkloadAnalysis/hotdb/db/db_impl.cc:1546
    #4 0x568585bf3c5a in BackgroundThreadMain /home/jeff-wang/WorkloadAnalysis/hotdb/util/env_posix.cc:867
    #5 0x568585bf351b in BackgroundThreadEntryPoint /home/jeff-wang/WorkloadAnalysis/hotdb/util/env_posix.cc:768
    #6 0x568585bf7325 in __invoke_impl<void, void (*)(leveldb::(anonymous namespace)::PosixEnv*), leveldb::(anonymous namespace)::PosixEnv*> /usr/include/c++/11/bits/invoke.h:61
    #7 0x568585bf7268 in __invoke<void (*)(leveldb::(anonymous namespace)::PosixEnv*), leveldb::(anonymous namespace)::PosixEnv*> /usr/include/c++/11/bits/invoke.h:96
    #8 0x568585bf71d8 in _M_invoke<0, 1> /usr/include/c++/11/bits/std_thread.h:259
    #9 0x568585bf7191 in operator() /usr/include/c++/11/bits/std_thread.h:266
    #10 0x568585bf7175 in _M_run /usr/include/c++/11/bits/std_thread.h:211
    #11 0x74bb4c4dc252  (/lib/x86_64-linux-gnu/libstdc++.so.6+0xdc252)
    #12 0x74bb4c094ac2 in start_thread nptl/pthread_create.c:442
    #13 0x74bb4c12684f  (/lib/x86_64-linux-gnu/libc.so.6+0x12684f)

AddressSanitizer can not provide additional info.
SUMMARY: AddressSanitizer: SEGV /home/jeff-wang/WorkloadAnalysis/hotdb/./db/version_set.h:463 in leveldb::Compaction::level() const
Thread T2 created by T1 here:
    #0 0x74bb4c858685 in __interceptor_pthread_create ../../../../src/libsanitizer/asan/asan_interceptors.cpp:216
    #1 0x74bb4c4dc328 in std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (/lib/x86_64-linux-gnu/libstdc++.so.6+0xdc328)
    #2 0x568585bf3a08 in Schedule /home/jeff-wang/WorkloadAnalysis/hotdb/util/env_posix.cc:839
    #3 0x568585abb43f in leveldb::DBImpl::MaybeScheduleCompaction() /home/jeff-wang/WorkloadAnalysis/hotdb/db/db_impl.cc:1541
    #4 0x568585ad429c in leveldb::DBImpl::MakeRoomForWrite(bool) /home/jeff-wang/WorkloadAnalysis/hotdb/db/db_impl.cc:3468
    #5 0x568585ad1e8d in leveldb::DBImpl::Write(leveldb::WriteOptions const&, leveldb::Slice const&, leveldb::Slice const&) /home/jeff-wang/WorkloadAnalysis/hotdb/db/db_impl.cc:3245
    #6 0x568585ad89b9 in leveldb::DB::Batch_Put(leveldb::WriteOptions const&, leveldb::Slice const&, leveldb::Slice const&) /home/jeff-wang/WorkloadAnalysis/hotdb/db/db_impl.cc:3761
    #7 0x568585ad094a in leveldb::DBImpl::Batch_Put(leveldb::WriteOptions const&, leveldb::Slice const&, leveldb::Slice const&) /home/jeff-wang/WorkloadAnalysis/hotdb/db/db_impl.cc:3075
    #8 0x568585aa0d7f in leveldb::Benchmark::DoWrite_zipf3(leveldb::(anonymous namespace)::ThreadState*, bool) (/home/jeff-wang/WorkloadAnalysis/hotdb/release/db_bench+0x2bd7f)
    #9 0x568585a9f6bb in leveldb::Benchmark::WriteZipf(leveldb::(anonymous namespace)::ThreadState*) (/home/jeff-wang/WorkloadAnalysis/hotdb/release/db_bench+0x2a6bb)
    #10 0x568585a9e8ee in leveldb::Benchmark::ThreadBody(void*) (/home/jeff-wang/WorkloadAnalysis/hotdb/release/db_bench+0x298ee)
    #11 0x568585bfc991 in void std::__invoke_impl<void, void (*)(void*), void*>(std::__invoke_other, void (*&&)(void*), void*&&) /usr/include/c++/11/bits/invoke.h:61
    #12 0x568585bfc8b2 in std::__invoke_result<void (*)(void*), void*>::type std::__invoke<void (*)(void*), void*>(void (*&&)(void*), void*&&) /usr/include/c++/11/bits/invoke.h:96
    #13 0x568585bfc812 in void std::thread::_Invoker<std::tuple<void (*)(void*), void*> >::_M_invoke<0ul, 1ul>(std::_Index_tuple<0ul, 1ul>) /usr/include/c++/11/bits/std_thread.h:259
    #14 0x568585bfc7c7 in std::thread::_Invoker<std::tuple<void (*)(void*), void*> >::operator()() /usr/include/c++/11/bits/std_thread.h:266
    #15 0x568585bfc7a7 in std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)(void*), void*> > >::_M_run() /usr/include/c++/11/bits/std_thread.h:211
    #16 0x74bb4c4dc252  (/lib/x86_64-linux-gnu/libstdc++.so.6+0xdc252)

Thread T1 created by T0 here:
    #0 0x74bb4c858685 in __interceptor_pthread_create ../../../../src/libsanitizer/asan/asan_interceptors.cpp:216
    #1 0x74bb4c4dc328 in std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (/lib/x86_64-linux-gnu/libstdc++.so.6+0xdc328)
    #2 0x568585bf2c22 in StartThread /home/jeff-wang/WorkloadAnalysis/hotdb/util/env_posix.cc:713
    #3 0x568585a9ebc5 in leveldb::Benchmark::RunBenchmark(int, leveldb::Slice, void (leveldb::Benchmark::*)(leveldb::(anonymous namespace)::ThreadState*)) (/home/jeff-wang/WorkloadAnalysis/hotdb/release/db_bench+0x29bc5)
    #4 0x568585a9e7a3 in leveldb::Benchmark::Run() (/home/jeff-wang/WorkloadAnalysis/hotdb/release/db_bench+0x297a3)
    #5 0x568585a99d53 in main /home/jeff-wang/WorkloadAnalysis/hotdb/benchmarks/db_bench.cc:2147
    #6 0x74bb4c029d8f in __libc_start_call_main ../sysdeps/nptl/libc_start_call_main.h:58

==864052==ABORTING
